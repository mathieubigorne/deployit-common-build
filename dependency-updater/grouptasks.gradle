///// Dependency group update tasks

def getUpdateTask(projectData) {
  (projectData.toUpdate.contains('depcfg') || projectData.toUpdate.contains('pom') ) ?  "${updateProjectDependencyTaskName(projectData.repoName)}" : null
}

def getPluginName(projectData) {
  (projectData.toUpdate.contains('depcfg') || projectData.toUpdate.contains('pom')) ? projectData.repoName : null
}

def nextLine = ',\n    '
for (taskDef in [
        [name: "groupUpdateXlDeployDependencies", data: mainProjectData],
        [name: "groupUpdateCiPluginDependencies", data: ciPluginProjectData],
        [name: "groupUpdateMiddleWarePluginDependencies", data: middleWarePluginProjectData],
        [name: "groupUpdatePluginDependencies", data: pluginProjectData],
        [name: "groupUpdateAllDependencies", data: projectData],
]) {
  task "${taskDef.name}"(dependsOn: taskDef.data.findResults { getUpdateTask(it) }) {
    group "Group update"
    description = "Update ${taskDef.data.findResults { getPluginName(it) }.join(nextLine)}"
  }
}

for (taskDef in [
        [name: "groupUpdateXlDeployGradle", data: mainProjectData],
        [name: "groupUpdatePluginGradle", data: pluginProjectData],
        [name: "groupUpdateAllGradle", data: projectData],
]) {
  task "${taskDef.name}"(dependsOn: taskDef.data.findResults { it.toUpdate.contains('depcfg') ? "${updateProjectGradleTaskName(it.repoName)}" : null }) {
    group "Group gradle update"
    description = "Update ${mainProjectData.findResults { it.toUpdate.contains('depcfg') ? it.repoName : null }.join(nextLine)}"
  }
}